<% function getSubjectDetail(subject) {
  if (subject) {
    return `<div class=class-container><a class="remove-class-btn btn"><i class="fa-solid fa-xmark"></i></a>
      <p class="subject-name">${subject.subject_name}</p>
      <span class="detail">${subject.subject_type} ${subject.credits}単位</span>
      <div class="flex">
      <button class='btn increase-absences' data-subject-id="${subject.subject_id}">欠課:${subject.absences} </button>
      <button class='btn increase-tardies' data-subject-id="${subject.subject_id}">遅刻:${subject.tardies} </button>
      </div>
            
            <a href="/getSubjectDetail?subject_id=${subject.subject_id}" class='edit-subject-btn btn'><i class="fa-solid fa-pen-to-square"></i></a></div>`;
  }
  return `<div class=class-container></div><button class='add-class-btn btn'><i class="fa-solid fa-plus"></i></button></div>`;
} %>

<!DOCTYPE html>
<html lang="ja">
<head>
    <%- include('head.ejs') %>
    <link href="/css/top.css" rel="stylesheet">
</head>
<body>
    <%- include('header.ejs') %>
    <aside id="sidebar">
      <div id="search-bar">
        <input type="text" placeholder="科目検索...">
      </div>
      <ul>
        <li><a class="add-subject-btn">新しい科目</a></li>
        <!-- ここに必要な要素を追加 -->
      </ul>
    </aside>
    <main>
      <table>
          <tr>
            <th>時間</th>
            <th>月</th>
            <th>火</th>
            <th>水</th>
            <th>木</th>
            <th>金</th>
          </tr>
          <% for (let i = 0; i < 4; i++) { %>
          <tr>
            <td ><%= i+1 %></td>
            <td data-week="mon" data-time="<%= i+1 %>" class="subject"><%- getSubjectDetail(monSubjects[i]) %></td>
            <td data-week="tue" data-time="<%= i+1 %>" class="subject"><%- getSubjectDetail(tueSubjects[i]) %></td>
            <td data-week="wed" data-time="<%= i+1 %>" class="subject"><%- getSubjectDetail(wedSubjects[i]) %></td>
            <td data-week="thu" data-time="<%= i+1 %>" class="subject"><%- getSubjectDetail(thuSubjects[i]) %></td>
            <td data-week="fri" data-time="<%= i+1 %>" class="subject"><%- getSubjectDetail(friSubjects[i]) %></td>
          </tr>
          <% } %>
      </table>
    </main>
  
  <script src="/js/common-scripts.js"></script>
  <script src="/js/add-class.js"></script>
  <script src="/js/increase.js"></script>
    
</body>

</html>
